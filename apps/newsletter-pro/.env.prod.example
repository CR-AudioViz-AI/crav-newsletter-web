# Newsletter Pro - Production Environment Variables
# Copy this to .env.prod and fill in actual values
# NEVER COMMIT THIS FILE WITH REAL VALUES

# =============================================================================
# Application Mode
# =============================================================================
NODE_ENV=production
APP_MODE=prod
NEXT_PUBLIC_APP_URL=https://newsletter.crav.io

# =============================================================================
# Database (Supabase Production)
# =============================================================================
VITE_SUPABASE_URL=https://your-prod-project.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
DATABASE_URL=postgresql://postgres.xxx:password@aws-0-us-west-1.pooler.supabase.com:6543/postgres

# =============================================================================
# Authentication (Production SSO)
# =============================================================================
AUTH_MODE=sso
CRAV_SSO_ISSUER=https://sso.crav.io
CRAV_SSO_JWKS_URL=https://sso.crav.io/.well-known/jwks.json
CRAV_SSO_AUDIENCE=crav.newsletter
CRAV_SSO_CLIENT_ID=newsletter-prod
CRAV_SSO_CLIENT_SECRET=REPLACE-WITH-PROD-SECRET

NEXTAUTH_SECRET=REPLACE-WITH-PROD-SECRET-32-CHARS-MIN
NEXTAUTH_URL=https://newsletter.crav.io

# =============================================================================
# Credits API (Production)
# =============================================================================
CREDITS_API_URL=https://credits-api.crav.io
CREDITS_API_KEY=REPLACE-WITH-PROD-API-KEY

# =============================================================================
# Email Provider (AWS SES Production)
# =============================================================================
AWS_SES_REGION=us-west-2
AWS_SES_ACCESS_KEY_ID=AKIA-REPLACE-WITH-PROD
AWS_SES_SECRET_ACCESS_KEY=REPLACE-WITH-PROD
AWS_SES_CONFIGURATION_SET=newsletter-prod

# Verified sender domain (must have DKIM/SPF/DMARC configured)
SES_FROM_DOMAIN=newsletter.crav.io
SES_FROM_EMAIL=no-reply@newsletter.crav.io
SES_FROM_NAME=Newsletter Pro

# =============================================================================
# Analytics (Production)
# =============================================================================
NEXT_PUBLIC_ANALYTICS_URL=https://analytics.crav.io
NEXT_PUBLIC_ANALYTICS_KEY=REPLACE-WITH-PROD-KEY
NEXT_PUBLIC_DASHBOARD_URL=https://dashboard.crav.io

# =============================================================================
# Observability (Production)
# =============================================================================
# Sentry
SENTRY_DSN=https://REPLACE-WITH-PROD-KEY@sentry.io/xxx
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1  # Sample 10% of transactions

# Datadog
DD_API_KEY=REPLACE-WITH-PROD-KEY
DD_SITE=datadoghq.com
DD_SERVICE=newsletter-pro
DD_ENV=production
DD_VERSION=1.0.0

# CloudWatch
CLOUDWATCH_LOG_GROUP=/aws/ecs/newsletter-prod
CLOUDWATCH_LOG_STREAM=app

# =============================================================================
# Rate Limiting (Production - Stricter Limits)
# =============================================================================
REDIS_URL=redis://prod-redis.crav.io:6379

# Rate limits (requests per window)
RATE_LIMIT_LOGIN_MAX=5
RATE_LIMIT_LOGIN_WINDOW=900  # 15 minutes
RATE_LIMIT_SCHEDULE_MAX=10
RATE_LIMIT_SCHEDULE_WINDOW=3600  # 1 hour
RATE_LIMIT_WEBHOOK_MAX=1000
RATE_LIMIT_WEBHOOK_WINDOW=60  # 1 minute

# =============================================================================
# Feature Flags (Production)
# =============================================================================
ENABLE_CSV_IMPORT=true
ENABLE_TEMPLATE_EDITOR=true
ENABLE_CAMPAIGN_SCHEDULING=true
ENABLE_REAL_TIME_METRICS=true

# =============================================================================
# Production Safety
# =============================================================================
DEBUG=  # Empty in production
LOG_LEVEL=info  # Only info and above
SKIP_ENV_VALIDATION=false

# Require HTTPS
REQUIRE_HTTPS=true

# CSRF protection
CSRF_SECRET=REPLACE-WITH-PROD-CSRF-SECRET

# =============================================================================
# Alerting Thresholds
# =============================================================================
ALERT_BOUNCE_RATE_THRESHOLD=5  # Alert if bounce rate > 5%
ALERT_ERROR_RATE_THRESHOLD=1   # Alert if error rate > 1%
ALERT_RESPONSE_TIME_MS=2000    # Alert if p99 > 2s

# =============================================================================
# Backup & Disaster Recovery
# =============================================================================
# Supabase auto-backups enabled via dashboard
BACKUP_RETENTION_DAYS=30

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 1. Store secrets in AWS Secrets Manager or equivalent
# 2. Rotate secrets every 90 days
# 3. Use IAM roles instead of access keys where possible
# 4. Never log secrets or PII
# 5. Encrypt at rest and in transit
# 6. Review access logs regularly

# =============================================================================
# CRITICAL: DO NOT COMMIT THIS FILE
# Add to .gitignore immediately
# Use environment-specific secret management
# =============================================================================
